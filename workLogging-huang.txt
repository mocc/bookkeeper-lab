发现的问题区：
1、看代码过程中发现开源项目者实现的代码有几个小错误，需要讨论后确定是否有错
2、开源项目者实现了集群订阅，但是却没有进行相应测试，需要进行先测试确定是否实现正确。这样就需要调用hedwig client的API写测试程序
3、若某个client channel断开了，会调用removeDeliveryEndPoint，closeAndRedeliver，RedeliveryTask。在remove过程中，需要去endpoints或throttledEndpoints中找到EP。
4、clusterDeliveryEndPoint中endpoints用的是非线程安全的linkedHashMap(有顺序),除了pollDeliveryEP操作需要使用迭代器从而需要保证有序外，似乎没有其他用处。
   为了减少同步的操作，想用线程安全的concurrentHashMap容器来代替。但这样会导致某些EP永远不会拿到的情况。所以最后还是保留用linkedHashMap.





功能实现思路区：
1、实现每个client对应一个messageWindowSize
  1.1在开源者的实现中，一个集群共享一个messageWindowSize,作为clusterDeliveryEndPoint的一个成员变量。
       一个client对应一个channelEndPoint,要想每个client都有自己的窗口，则需要将messageWindowSize作为channelEndpoint的一个成员变量。
      在server端接收到订阅request后，将messageWindowSize从request中拿出，并传给对应的channelEndPoint.
      shouldThrottle方法需要更改，只有当
      
       
  1.2集群中所有client的订阅request中都是相同的(topic,subscribeId,messageWindowSize,subscriptionType=cluster).
      messageWindowSize在client端的封装：放在pubsubData中，然后封装成pubsubRequest发送出去

  



工作记录区：      
9/02-06    
前2天主要将代码放到远程仓库中，中间经历了各种莫名奇怪问题，最后决定不放在咱们服务器上，放在github上。
后三天主要针对要添加的功能边看代码，边想思路。由于长时间没看代码，有些生疏，所以花的时间略长。         

9/09-17
目前已经完成“每个client实现一个窗口控制”功能实现和测试工作，测试显示运行正常，测试代码：hedwig.server.test.hedwig.client.TestClusterClientWindowThrottling.
同时对源代码实现的集群订阅功能进行了测试，测试代码在：hedwig.server.test.hedwig.client.TestClustersubscription.
发现了源代码里面的2处小错误并进行了更改。
1、FIFODeliveryManager.StartServingClusterSubscriberRequest.performRequest()：addDeliveryPtr(subscriber, subscriber.lastLocalSeqIdDelivered);subscriber参数更改了
2、.hedwig.server.delivery.ClusterDeliveryEndPoint.send(DeliveredMessage msg)： pendings.put(seqid, msg);    位置更改了
     